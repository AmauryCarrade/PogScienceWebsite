{% extends "base.html" %}

{% load i18n humanize %}

{% block content %}
    <section class="hero is-medium is-primary">
        <div class="hero-body">
            <div class="container">
                <p class="title">
                    POGSCIENCE
                </p>
                <p class="subtitle">
                    le pog kilébi1 et qui n'arrache pas du tout les yeux avec cette
                    couleur agressive sérieux faudra vraiment reprendre ça avec le
                    graphiste en plus c'est la rentrée étou là y'a moyen de faire
                    des trucs ça va être bien bref<br/>
                    en plus on pourra mettre une sorte de réseau avec tous les
                    streamers affiché dynamiquement ça va être beau allez là<br/>
                    vous connaissez pogscience ?
                </p>
            </div>
        </div>
    </section>

    {# if il y a ou des streamers en live ou des événements à venir #}
    {# S'il n'y a personne en live et rien à venir, inutile d'afficher quoique ce soit #}
    <section class="section right-now">
        <div class="container">
            <header>
                <div class="titles">
                    {% if live_streamers|length_is:"1" %}
                        {% with streamer=live_streamers|first %}
                            <h2 class="title">{{ streamer.name }} est en live !</h2>
                            <p class="subtitle">Rejoignez {{ streamer.live_spectators|apnumber }} spectateurs sur {{ streamer.live_game_name }}</p>
                        {% endwith %}
                    {% elif live_streamers|length_is:"2" %}
                        {% with streamer1=live_streamers|first streamer2=live_streamers.1 %}
                            <h2 class="title">{{ streamer1.name }} et {{ streamer2.name }} sont en live !</h2>
                            <p class="subtitle">Rejoignez {{ streamer1.live_spectators|add:streamer2.live_spectators|apnumber }} spectateurs</p>
                        {% endwith %}
                    {% elif live_streamers|length %}
                        <h2 class="title">Il y a {{ live_streamers.count|apnumber }} streamers en live !</h2>
                        <p class="subtitle">Rejoignez {{ all_spectators_count|apnumber }} spectateurs !</p>
                    {% else %}
                        <h2 class="title">Personne n'est en live pour le moment…</h2>
                        <p class="subtitle">…mais de nouveaux streams arrivent&nbsp;!</p>
                    {% endif %}
                </div>
                <aside>
                    <p>
                        <a href="#" class="button is-outlined is-white">
                            <span>{% trans "Calendrier des streams" %}</span>
                            <span class="icon is-small">
                          <span class="fas fa-angle-right"></span>
                        </span>
                        </a>
                    </p>
                    <p class="is-timezone">Heure de {{ TIME_ZONE_CITY }}</p>
                </aside>
            </header>

            {% for streamer in live_streamers %}
                {% include "live-stream.part.html" with streamer=streamer solo=True hide_spectators=live_streamers|length_is:"1" %}
            {% endfor %}

            {% if live_streamers %}
                <div class="divider">{% trans "Mais aussi, bientôt sur Twitch" %}</div>
            {% endif %}

            <div class="columns is-multiline">
                {% for stream in scheduled %}
                    <div class="column is-6">
                        {% include "scheduled-stream.part.html" with stream=stream %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}
